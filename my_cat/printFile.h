//* –¥–æ–±–∞–≤–ª—è–µ–º PRINT_FILE_H –≤ –ø—Ä–µ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä üõ†Ô∏è
#ifndef PRINT_FILE_H
#define PRINT_FILE_H

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>
#include "flagChecker.h"

//* –§—É–Ω—Ü–∏—è –¥–æ–±–∞–≤—è–ª–µ—Ç —Å–∏–º–≤–æ–ª—ã –≤ stdout
void printFile(Flags flagsObj, int argc, char *argv[]){
  //* –ü—Ä–æ–ø—É—Å–∫–∞–µ–º ./a.out –∏ -—Ñ–ª–∞–≥–∏ –Ω–∞—á–∏–Ω–∞–µ–º —Å 2
  for(int i = 2; i < argc; i++){
    FILE *file = fopen(argv[i], "r");
    char ch;
    int circles = 0;
    bool newRow = true;
    int lineCount = 1;
    //* –ü–æ—à—Ç—É—á–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª, –¥–æ–±–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞–∂–¥–æ–≥–æ —Ñ–ª–∞–≥–∞ –≤ while
    while((ch = fgetc(file)) != EOF){
    //* –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–ª–∞–≥–æ–≤ üá∑üá∫
/*üö©*/if(flagsObj.s == 1){
//* –ò—Å–ø–æ–ª—å–∑—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é circles –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–æ–º–µ–Ω—Ç–∞ –≥–¥–µ –±—É–¥—É—Ç –∏–¥—Ç–∏ 3 \n –ø–æ–¥—Ä—è–¥ —á—Ç–æ–±—ã —Å—Ö–ª–æ–ø–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É
        if(ch == '\n' && newRow){
          circles++;
          if(circles >= 2){
            continue;
          }
        }
      }
/*üö©*/if(flagsObj.b == 1){
        //* –¶–∏–∫–ª–∞–º–∏ –¥–æ–±–∞–≤–ª—è—é –ø—Ä–æ–±–µ–ª—ã –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ -b –≤ cat –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ 
        if(newRow && ch != '\n'){
          fprintf(stdout,"     %d	",lineCount);//!üö® –ü–æ—Å–ª–µ %d –∏–¥–µ—Ç ‚Üí TAB 
          lineCount++;
        }else if(newRow){
          for (int k = 0; k < 8; k++){
            fputc(' ', stdout);
          }
          
        }
      }
/*üö©*/if(flagsObj.n == 1 && flagsObj.b != 1){
        //* –¶–∏–∫–ª–∞–º–∏ –¥–æ–±–∞–≤–ª—è—é –ø—Ä–æ–±–µ–ª—ã –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ -b –≤ cat –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ 
        if(newRow){
          fprintf(stdout,"     %d	",lineCount);//!üö® –ü–æ—Å–ª–µ %d –∏–¥–µ—Ç ‚Üí TAB 
          lineCount++;
        }
      }
/*üö©*/if(flagsObj.e == 1){
        //* –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º $ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ \n
        if(ch == '\n'){
          fputc('$', stdout);
        }
      }
/*üö©*/if(flagsObj.t == 1){
  //!üö® CH == ‚Üí TAB 
  //* –ù–∞—Ö–æ–¥–∏–º TAB –∏ –∑–∞–º–µ–Ω—è–µ–º –µ–≥–æ –¥–≤—É–º—è —Å–∏–º–≤–æ–ª–∞–º–∏
  if(ch == '	'){
    fputc('^',stdout);
    fputc('I',stdout);
    //* –ó–∞–º–µ–Ω—è–µ–º ch –Ω–∞ –ø—É—Å—Ç–æ—Ç—É
    ch = '\0';
  }
}
      //* –ö–∞–∂–¥—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –ø—Ä–æ–≤–µ—Ä—è–µ–º newRow —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π
      newRow = (ch == '\n');
      //* –ö–∞–∂–¥—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –≤—ã–≤–æ–¥–∏–º –≤ —Å–∏–º–≤–æ–ª –≤ stdout
      fputc(ch, stdout);
    }
  }

}
#endif
